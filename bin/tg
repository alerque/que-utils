#!/usr/bin/env zsh

set -e

codify () {
	case $1 in
		en)
			echo English en-US
			;;
		tr)
			echo Turkish tr-TR
			;;
		ru)
			echo Russian ru-RU
			;;
	esac
}

codify $1 | read SOURCE_LANG SOURCE_CODE
codify $2 | read TARGET_LANG TARGET_CODE

cat <<- EOF | read PROMPT
You are a professional ${SOURCE_LANG} (${SOURCE_CODE}) to ${TARGET_LANG} (${TARGET_CODE}) translator. Your goal is to accurately convey the meaning and nuances of the original ${SOURCE_LANG} text while adhering to ${TARGET_LANG} grammar, vocabulary, and cultural sensitivities.
Produce only the ${TARGET_LANG} translation, without any additional explanations or commentary. Please translate the following ${SOURCE_LANG} text into ${TARGET_LANG}:
EOF

(
echo $PROMPT
echo
echo
cat -
) | ollama run translategemma:$3
