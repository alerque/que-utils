#!/bin/zsh

set -e

cat /proc/acpi/battery/BAT0/{info,state} | while IFS=: read key value; do
	echo $value | perl -pne 's/^\S*//g' | read value
	case $key in
		remaining\ capacity*)
			remaining=$value
			;;
		charging\ state*)
			state=$value
			;;
		last\ full\ capacity*)
			capacity=$value
			;;
	esac
	#echo $key is $value
done

echo "Battery has $remaining of $capacity left and is $state."
